{% comment %}
  Portfolio grid â€” displays blog articles as portfolio projects.
  Create a blog called "Portfolio" in Shopify admin and add articles for each project.
{% endcomment %}

<section class="portfolio section-padding">
  {% if section.settings.heading != blank %}
    <h2 class="portfolio__heading text-upper text-spacing">{{ section.settings.heading }}</h2>
  {% endif %}

  {% assign blog = blogs[section.settings.blog] %}

  {% if blog != blank and blog.articles_count > 0 %}
    <div class="portfolio__grid">
      {% for article in blog.articles limit: section.settings.max_items %}
        <a href="{{ article.url }}" class="portfolio__card">
          {% if article.image %}
            <div class="portfolio__image-wrap">
              <img
                src="{{ article.image | image_url: width: 800 }}"
                srcset="{{ article.image | image_url: width: 400 }} 400w, {{ article.image | image_url: width: 800 }} 800w"
                sizes="(max-width: 749px) 100vw, 50vw"
                alt="{{ article.title }}"
                loading="lazy"
                class="portfolio__image"
              >
            </div>
          {% endif %}
          <div class="portfolio__info">
            <h3 class="portfolio__title">{{ article.title }}</h3>
            {% if article.tags.size > 0 %}
              <p class="portfolio__tag text-muted">{{ article.tags | first }}</p>
            {% endif %}
          </div>
        </a>
      {% endfor %}
    </div>

    {% if section.settings.show_view_all and blog.articles_count > section.settings.max_items %}
      <div class="portfolio__actions">
        <a href="{{ blog.url }}" class="btn btn--outline">View All Projects</a>
      </div>
    {% endif %}
  {% else %}
    <p class="text-muted text-center">Portfolio entries will appear here once articles are created in the "{{ section.settings.blog }}" blog.</p>
  {% endif %}
</section>

{% stylesheet %}
  .portfolio__heading {
    font-size: var(--text-xs);
    text-align: center;
    margin-bottom: var(--space-lg);
  }

  .portfolio__grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: var(--space-xs);
  }

  .portfolio__card {
    display: block;
    overflow: hidden;
  }

  .portfolio__image-wrap {
    aspect-ratio: 4 / 5;
    overflow: hidden;
  }

  .portfolio__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-slow);
  }

  .portfolio__card:hover .portfolio__image {
    transform: scale(1.03);
  }

  .portfolio__info {
    padding: var(--space-sm) 0;
  }

  .portfolio__title {
    font-family: var(--font-heading);
    font-size: var(--text-base);
    font-weight: 300;
    letter-spacing: 0.04em;
  }

  .portfolio__tag {
    font-size: var(--text-xs);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-top: var(--space-xs);
  }

  .portfolio__actions {
    text-align: center;
    margin-top: var(--space-lg);
  }

  @media (max-width: 749px) {
    .portfolio__grid {
      grid-template-columns: 1fr;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Portfolio",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Portfolio"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Select blog",
      "default": "portfolio"
    },
    {
      "type": "range",
      "id": "max_items",
      "min": 2,
      "max": 12,
      "step": 2,
      "label": "Maximum projects",
      "default": 6
    },
    {
      "type": "checkbox",
      "id": "show_view_all",
      "label": "Show view all button",
      "default": true
    }
  ],
  "presets": [
    {
      "name": "Portfolio",
      "category": "Portfolio"
    }
  ]
}
{% endschema %}
